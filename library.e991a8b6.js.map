{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,4BAKAC,EAAAF,GAASG,OAAOC,KAAK,CACnBC,cAAc,IAKhB,IAAIC,EAAsB,GACtBC,EAAoB,GAExB,MAAMC,EAAO,CACXC,eAAgBC,SAASC,cAAc,iBACvCC,WAAYF,SAASC,cAAc,YACnCE,cAAeH,SAASC,cAAc,cACtCG,YAAaJ,SAASC,cAAc,eAgCtC,SAASI,IAIP,GAFAP,EAAKK,cAAcG,UAAUC,IAAI,cACjCT,EAAKM,YAAYE,UAAUE,OAAO,cAEc,MAA9CC,aAAaC,QA9CY,UA+CwC,GAAjEC,KAAKC,MAAMH,aAAaC,QA/CC,UA+C8BG,OAIvD,OAFArB,EAAAF,GAASG,OAAOqB,QAAQ,wCACxBC,IAGFnB,EAAsBe,KAAKC,MAAMH,aAAaC,QArDnB,UAuD3BM,EADmBpB,E,CAIrB,SAASqB,IAGP,GAFAnB,EAAKK,cAAcG,UAAUE,OAAO,cACpCV,EAAKM,YAAYE,UAAUC,IAAI,cAEe,MAA5CE,aAAaC,QA7DU,UA8DwC,GAA/DC,KAAKC,MAAMH,aAAaC,QA9DD,UA8D8BG,OAMrD,OAJAf,EAAKI,WAAWgB,UAAY,GAC5B1B,EAAAF,GAASG,OAAOqB,QAAQ,iCACxBC,SACAjB,EAAKK,cAAcgB,iBAAiB,QAASd,GAG/CR,EAAoBc,KAAKC,MAAMH,aAAaC,QAtEnB,UAuEzB,IAAIU,EAAevB,EACnBwB,QAAQC,IAAIF,GAGoC,MAA9CX,aAAaC,QA5EY,UA6EwC,GAAjEC,KAAKC,MAAMH,aAAaC,QA7EC,UA6E8BG,SAEvDQ,QAAQC,IACN,4CACAb,aAAaC,QAjFU,UAmFzBK,IACAjB,EAAKK,cAAcgB,iBAAiB,QAASd,IAE/CW,EAAWI,E,CAGN,SAASJ,EAAWI,GACzB,MACMG,EAASH,EAAaI,KAC1B,EAACC,eACCA,EAAcC,aACdA,EACAC,QAASC,KAAMC,GAAMC,GACrBA,EAAEC,YACFA,EAAWC,aACXA,KAIO,+EACmCF,eAAgBA,6QAInCC,gMAOON,2CACFI,OAfjB,IAAII,KAAKP,GACGQ,oCAckDF,wDAK3EG,KAAK,IACPrC,EAAKI,WAAWgB,UAAYK,C,CAGvB,SAASR,IACdjB,EAAKI,WAAWgB,UACd,wU,CAlHJG,QAAQC,IAAIxB,GAIZ,WACE,IAAKA,EAAKC,eAAeO,UAAU8B,SAAS,sBAC1C,OACK,GAC0C,OAA/C3B,aAAaC,QApBY,UAqByC,IAAlEC,KAAKC,MAAMH,aAAaC,QArBC,UAqB8BG,OAEvDQ,QAAQC,IAAI,4BAAoD1B,GAChEJ,EAAAF,GAASG,OAAOqB,QAAQ,mCACxBC,IAEAjB,EAAKM,YAAYe,iBAAiB,QAASF,OACtC,CACLrB,EAAsBe,KAAKC,MACzBH,aAAaC,QA9BU,UAgCzB,IAAIU,EAAexB,EACnBoB,EAAWI,GACXC,QAAQC,IAAIF,GACZtB,EAAKK,cAAcgB,iBAAiB,QAASd,GAC7CP,EAAKM,YAAYe,iBAAiB,QAASF,GAC3CnB,EAAKI,WAAWiB,iBAAiB,QAASkB,EAAAC,kB,EAvB9CC","sources":["src/js/library.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport './fetchMovieTrailer';\nimport { onModalWindowOpen, onModalWindowClose, onBackdropClick, onEscClose } from './modal_film';\n// import { markupCard } from '../watched-queue/watched-queue-markup';\n\nNotiflix.Notify.init({\n  clickToClose: true,\n});\n\nconst LOCAL_STORGE_WATCHED = 'watch';\nconst LOCAL_STORGE_QUEUE = 'queue';\nlet LocalStgWatchedData = [];\nlet LocalStgQueueData = [];\n\nconst refs = {\n  libraryCurrent: document.querySelector('#library-link'),\n  galleryRef: document.querySelector('.gallery'),\n  watchedButton: document.querySelector('.btn-watch'),\n  queueButton: document.querySelector('.btn-queue'),\n};\n\nconsole.log(refs);\n\ncurrentPageCheck();\n\nfunction currentPageCheck() {\n  if (!refs.libraryCurrent.classList.contains('nav__link--current')) {\n    return;\n  } else if (\n    localStorage.getItem(LOCAL_STORGE_WATCHED) === null ||\n    JSON.parse(localStorage.getItem(LOCAL_STORGE_WATCHED)).length === 0\n  ) {\n    console.log('Перевірка при завантажені', LocalStgWatchedData);\n    Notiflix.Notify.failure('There are no films in WATCHED !');\n    addImgIfLocalStgEmpty();\n\n    refs.queueButton.addEventListener('click', onQueueButton);\n  } else {\n    LocalStgWatchedData = JSON.parse(\n      localStorage.getItem(LOCAL_STORGE_WATCHED)\n    );\n    let LocalStgData = LocalStgWatchedData;\n    markupCard(LocalStgData);\n    console.log(LocalStgData);\n    refs.watchedButton.addEventListener('click', onWatchedButton);\n    refs.queueButton.addEventListener('click', onQueueButton);\n    refs.galleryRef.addEventListener('click', onModalWindowOpen);\n  }\n}\n\nfunction onWatchedButton() {\n  // refs.galleryRef.innerHTML = '';\n  refs.watchedButton.classList.add('btn-active');\n  refs.queueButton.classList.remove('btn-active');\n  if (\n    localStorage.getItem(LOCAL_STORGE_WATCHED) == null ||\n    JSON.parse(localStorage.getItem(LOCAL_STORGE_WATCHED)).length == 0\n  ) {\n    Notiflix.Notify.failure('There are no films in WATCHED !');\n    addImgIfLocalStgEmpty();\n    return;\n  }\n  LocalStgWatchedData = JSON.parse(localStorage.getItem(LOCAL_STORGE_WATCHED));\n  let LocalStgData = LocalStgWatchedData;\n  markupCard(LocalStgData);\n}\n\nfunction onQueueButton() {\n  refs.watchedButton.classList.remove('btn-active');\n  refs.queueButton.classList.add('btn-active');\n  if (\n    localStorage.getItem(LOCAL_STORGE_QUEUE) == null ||\n    JSON.parse(localStorage.getItem(LOCAL_STORGE_QUEUE)).length == 0\n  ) {\n    refs.galleryRef.innerHTML = '';\n    Notiflix.Notify.failure('There are no films in Queue !');\n    addImgIfLocalStgEmpty();\n    refs.watchedButton.addEventListener('click', onWatchedButton);\n    return;\n  }\n  LocalStgQueueData = JSON.parse(localStorage.getItem(LOCAL_STORGE_QUEUE));\n  let LocalStgData = LocalStgQueueData;\n  console.log(LocalStgData);\n\n  if (\n    localStorage.getItem(LOCAL_STORGE_WATCHED) == null ||\n    JSON.parse(localStorage.getItem(LOCAL_STORGE_WATCHED)).length == 0\n  ) {\n    console.log(\n      'onWatchedButton всередині функції onQUEUE',\n      localStorage.getItem(LOCAL_STORGE_WATCHED)\n    );\n    addImgIfLocalStgEmpty();\n    refs.watchedButton.addEventListener('click', onWatchedButton);\n  }\n  markupCard(LocalStgData);\n}\n\nexport function markupCard(LocalStgData) {\n  const filmImg = 'https://image.tmdb.org/t/p/w500/';\n  const markup = LocalStgData.map(\n    ({\n      original_title,\n      release_date,\n      genres: {name: genre},\n      id,\n      poster_path,\n      vote_average,\n    }) => {\n      let year = new Date(release_date);\n      let yearRelease = year.getFullYear();\n      return `<li class=\"card__item item\">\n      <a class=\"card__link link\" href=\"#\" id=\"${id}\" data-id=\"${id}\" data-film-open>\n        <div class=\"card__thumb\">\n          <img class=\"card__img\"                      \n            sizes=\"(min-width: 1200px) 370px, (min-width: 768px) 354px, (max-width: 767px) 450px, 100vw\"\n            src='${filmImg}${poster_path}'\n            alt=\"tehnocryak\"\n            width=\"100%\"\n            class=\"card__img\"\n          />\n        </div>\n        <div class=\"card__meta\">\n          <h2 class=\"card__title\">${original_title}</h2>\n          <p class=\"card__info\">${genre} | ${yearRelease} <span class=\"vote\">${vote_average}</span></p>\n        </div>\n      </a>\n    </li>`\n    }\n  ).join('');\n  refs.galleryRef.innerHTML = markup;\n}\n\nexport function addImgIfLocalStgEmpty() {\n  refs.galleryRef.innerHTML =\n    '<div class=\"img-emp\"><h2 style=\"font-size: 17px; text-align: center; margin-bottom: 20px;\">You have not chosen anything yet!</h2><img class=\"img-for-empty\" style=\" max-width: 704px; \" src=\"https://kartinkin.net/pics/uploads/posts/2022-08/1660180902_1-kartinkin-net-p-fon-kinoteatr-krasivo-1.jpg\" alt=\" \" loading=\"lazy\"/></div>';\n}\n"],"names":["$eWCmQ","parcelRequire","$parcel$interopDefault","Notify","init","clickToClose","$1cafa503bc57b7a0$var$LocalStgWatchedData","$1cafa503bc57b7a0$var$LocalStgQueueData","$1cafa503bc57b7a0$var$refs","libraryCurrent","document","querySelector","galleryRef","watchedButton","queueButton","$1cafa503bc57b7a0$var$onWatchedButton","classList","add","remove","localStorage","getItem","JSON","parse","length","failure","$1cafa503bc57b7a0$export$347f927d5e059c64","$1cafa503bc57b7a0$export$7c6f20cf2792bee5","$1cafa503bc57b7a0$var$onQueueButton","innerHTML","addEventListener","LocalStgData","console","log","markup","map","original_title","release_date","genres","name","genre","id","poster_path","vote_average","Date","getFullYear","join","contains","$KVL8z","onModalWindowOpen","$1cafa503bc57b7a0$var$currentPageCheck"],"version":3,"file":"library.e991a8b6.js.map"}