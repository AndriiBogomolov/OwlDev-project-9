!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequired7c6=r);var i=r("iU1Pc"),a={modalFilmImg:document.querySelector(".modal__img"),modalFilmId:document.querySelector(".modal-film__id"),modalFilmTitle:document.querySelector(".modal-film__title"),modalFilmVote:document.querySelector(".vote"),modalFilmVotes:document.querySelector(".votes"),modalFilmPopularity:document.querySelector(".popularity"),modalFilmOrigTitle:document.querySelector(".orig-title"),modalFilmGenre:document.querySelector(".genre"),modalFilmDescription:document.querySelector(".about__text"),modalTrailerWatch:document.querySelector(".modal__watch"),modalFilmWatched:document.querySelector(".button-watched"),modalFilmQueue:document.querySelector(".button-queue"),searchForm:document.querySelector(".search-form"),gallery:document.querySelector(".card"),paginationList:document.querySelector(".pagination-mid"),pageList:document.querySelector(".pages"),lastBtn:document.getElementById("last-page"),prevBtn:document.getElementById("button-prev"),nextBtn:document.getElementById("button-next"),firstPage:document.querySelector(".first"),lastPage:document.querySelector(".last")},c="0f09f0e29eb26a1e28b4809ac59dbd60",l="https://api.themoviedb.org/3",u=(i=r("iU1Pc"),document.querySelector(".card")),d=document.querySelector(".backdrop"),s=document.querySelector(".close-button");function f(){d.classList.add("is-hidden"),document.body.style.overflow="visible"}function m(e){"Escape"===e.code&&(document.removeEventListener("keydown",m),f())}u.addEventListener("click",(function(e){if(e.preventDefault(!e.target.closest("li")))return void e.preventDefault();e.target.closest("li")&&(function(e){return fetch("".concat(l,"/movie/").concat(e,"?api_key=").concat(c)).then((function(e){if(!e.ok)throw new Error;return e.json()})).catch((function(e){return i.Notify.failure("Sorry, something goes wrong. Please, try again")}))}(e.target.closest("a").getAttribute("id")).then((function(e){return n=(t=e).genres.map((function(e){return e.name})).join(", "),o=localStorage.getItem("watch"),r=(o=o?JSON.parse(o):[]).find((function(e){return e.id===t.id})),i=localStorage.getItem("queue"),c=(i=i?JSON.parse(i):[]).find((function(e){return e.id===t.id})),a.modalFilmImg.src="https://image.tmdb.org/t/p/w500/".concat(t.poster_path),a.modalFilmImg.alt="".concat(t.title," poster"),a.modalFilmTitle.textContent=t.title,a.modalFilmId.textContent=t.id,a.modalFilmVote.textContent=t.vote_average,a.modalFilmVotes.textContent=t.vote_count,a.modalFilmPopularity.textContent=t.popularity,a.modalFilmOrigTitle.textContent=t.original_title,a.modalFilmDescription.textContent=t.overview,a.modalFilmGenre.textContent=n,a.modalFilmWatched.dataset.info=JSON.stringify(t),a.modalFilmQueue.dataset.info=JSON.stringify(t),a.modalFilmWatched.textContent=r?"REMOVED FORM WATCHED":"ADD TO WATCHED",void(a.modalFilmQueue.textContent=c?"REMOVED FORM QUEUE":"ADD TO QUEUE");var t,n,o,r,i,c})),document.body.style.overflow="hidden",d.classList.remove("is-hidden"),document.addEventListener("keydown",m))})),s.addEventListener("click",f),d.addEventListener("click",(function(e){e.currentTarget===e.target&&f()}));document.querySelector(".modal-film");var g=document.querySelector(".button-watched"),h=document.querySelector(".button-queue");g.addEventListener("click",(function(t){var n=JSON.parse(t.target.dataset.info);console.log(t.target.dataset.info);var o=localStorage.getItem("watch");console.log(o),o=o?JSON.parse(o):[];o.find((function(e){return e.id===n.id}))?(o=o.filter((function(e){return e.id!==n.id})),a.modalFilmWatched.textContent="ADD TO WATCH",e(i).Notify.failure("Film remove from watch")):(o.push(n),a.modalFilmWatched.textContent="REMOVE FROM WATCH",e(i).Notify.success("Film add to watch"));localStorage.setItem("watch",JSON.stringify(o))})),h.addEventListener("click",(function(t){var n=JSON.parse(t.target.dataset.info);console.log(t);var o=localStorage.getItem("queue");console.log(o),o=o?JSON.parse(o):[];o.find((function(e){return e.id===n.id}))?(o=o.filter((function(e){return e.id!==n.id})),a.modalFilmQueue.textContent="ADD TO QUEUE",e(i).Notify.failure("Film remove from watch")):(o.push(n),a.modalFilmQueue.textContent="REMOVE FROM QUEUE",e(i).Notify.success("Film add to queue"));localStorage.setItem("queue",JSON.stringify(o))}));var p={openFooterModal:document.querySelector('[data-action="open-lightbox"]'),closeFooterModal:document.querySelector('[data-action="close-lightbox"]'),lightboxFooterModal:document.querySelector(".js-lightbox"),backdropClick:document.querySelector(".lightbox"),body:document.querySelector("body")};function y(){window.removeEventListener("keydown",v),p.lightboxFooterModal.classList.add("visually-hidden"),p.body.classList.remove("on-scroll")}function v(e){"Escape"===e.code&&(y(),p.body.classList.remove("on-scroll"))}p.openFooterModal.addEventListener("click",(function(){window.addEventListener("keydown",v),p.lightboxFooterModal.classList.remove("visually-hidden"),p.body.classList.add("on-scroll")})),p.closeFooterModal.addEventListener("click",y),p.backdropClick.addEventListener("click",(function(e){e.currentTarget===e.target&&(y(),p.body.classList.remove("on-scroll"))}));var b,w=document.querySelector(".card");function L(e){e.results.map((function(e){var t=new Date(e.release_date).getFullYear(),n=function(e){var t=[];return e.forEach((function(e){t.push(b.find((function(t){return t.id===e})).name)})),t}(e.genre_ids);return w.innerHTML+='<li class="card__item item">\n\n                  <a class="card__link link" href="#" id="'.concat(e.id,'" data-id="').concat(e.id,'" data-film-open>\n                    <div class="card__thumb">\n                      <img class="card__img"                      \n                        sizes="(min-width: 1200px) 370px, (min-width: 768px) 354px, (max-width: 767px) 450px, 100vw"\n                        src=\'https://www.themoviedb.org/t/p/w500/').concat(e.poster_path,'\'\n                        alt="tehnocryak"\n                        width="100%"\n                        class="card__img"\n                      />\n                    </div>\n                    <div class="card__meta">\n                      <h2 class="card__title">').concat(e.original_title,'</h2>\n                      <p class="card__info">').concat(n," | ").concat(t,"</p>\n                    </div>\n                  </a>\n                </li>")}))}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=177f83f5259c7f846e561f4715bd03a4&language=en-US").then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){return b=e.genres})).catch((function(e){return console.log(e)})),window.onload=function(){document.body.classList.add("loaded_hiding"),window.setTimeout((function(){document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),500)};var E={};E=function e(t,n,o){function r(a,c){if(!n[a]){if(!t[a]){var l=void 0;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};t[a][0].call(d.exports,(function(e){return r(t[a][1][e]||e)}),d,d.exports,e,t,n,o)}return n[a].exports}for(var i=void 0,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=n.visible=void 0;var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return n.innerHTML=e.trim(),!0===t?n.children:n.firstChild},r=function(e,t){var n=e.children;return 1===n.length&&n[0].tagName===t},i=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};n.visible=i,n.create=function(e,t){var n=function(e,t){var n=o('\n\t\t<div class="basicLightbox '.concat(t.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),i=n.querySelector(".basicLightbox__placeholder");e.forEach((function(e){return i.appendChild(e)}));var a=r(i,"IMG"),c=r(i,"VIDEO"),l=r(i,"IFRAME");return!0===a&&n.classList.add("basicLightbox--img"),!0===c&&n.classList.add("basicLightbox--video"),!0===l&&n.classList.add("basicLightbox--iframe"),n}(e=function(e){var t="string"==typeof e,n=e instanceof HTMLElement==1;if(!1===t&&!1===n)throw new Error("Content must be a DOM element/node or string");return!0===t?Array.from(o(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(t)),a=function(e){return!1!==t.onClose(c)&&function(e,t){return e.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===i(e)||e.parentElement.removeChild(e),t()}),410),!0}(n,(function(){if("function"==typeof e)return e(c)}))};!0===t.closable&&n.addEventListener("click",(function(e){e.target===n&&a()}));var c={element:function(){return n},visible:function(){return i(n)},show:function(e){return!1!==t.onShow(c)&&function(e,t){return document.body.appendChild(e),setTimeout((function(){requestAnimationFrame((function(){return e.classList.add("basicLightbox--visible"),t()}))}),10),!0}(n,(function(){if("function"==typeof e)return e(c)}))},close:a};return c}},{}]},{},[1])(1);i=r("iU1Pc");a.modalTrailerWatch.addEventListener("click",(function(e){e.preventDefault(),function(e){(function(e){return fetch("".concat(l,"/movie/").concat(e,"/videos?api_key=").concat(c)).then((function(e){if(!e.ok)throw new Error;return e.json()})).catch((function(e){return i.Notify.failure("Sorry, something goes wrong. Please, try again")}))})(e).then((function(e){if(0!==e.results.length){var t=e.results.filter((function(t){return t.official?t.official:e.results[0].key}))[0].key,n=E.create('\n      <iframe src="https://www.youtube.com/embed/'.concat(t,'" width="560" height="315" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n  '));n.show(),function(e){document.querySelector(".basicLightbox--iframe").insertAdjacentHTML("afterbegin",'<button\n        type="button"\n        class="modal-film__btn trailer-btn"\n        data-trailer-close\n        >\n        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M8 8L22 22" stroke="black" stroke-width="2"/>\n        <path d="M8 22L22 8" stroke="black" stroke-width="2"/>\n        </svg>\n        </button>\n    '),document.querySelector("[data-trailer-close]").addEventListener("click",(function(t){e.close()}))}(n)}}))}(a.modalFilmId.textContent)}));var S={};Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var _={};function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e,t,n){t&&x(e.prototype,t);n&&x(e,n);return e};i=r("iU1Pc");var q,k=document.querySelector("input"),F=document.querySelector("button"),M=new(function(){"use strict";function t(){e(S)(this,t),this.page=1,this.searchQuery=""}return e(_)(t,[{key:"fetchPopularMovies",value:function(){var e="".concat(l,"/trending/movie/day?api_key=").concat(c,"&page=").concat(this.page);return fetch(e).then((function(e){return e.json()}))}},{key:"fetchMoviesByRequest",value:function(){var e="".concat(l,"/search/movie?api_key=").concat(c,"&language=en-US&query=").concat(this.searchQuery,"&page=").concat(this.page,"&include_adult=false");return fetch(e).then((function(e){return e.json()}))}},{key:"incrementPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"clearInput",value:function(){this.searchQuery.innerHTML=""}},{key:"pagination",value:function(e){this.page=e}}]),t}()),T=1;function C(){M.fetchMoviesByRequest().then((function(t){console.log(t),0==t.total_results&&(e(i).Notify.failure('"Sorry, there are no film with this name. Please try again."'),M.query="",O()),q=t.total_pages,a.lastBtn.textContent=q,L(t),N()})).catch((function(e){return console.log(e)}))}function O(){M.fetchPopularMovies().then((function(e){q=e.total_pages,a.lastBtn.textContent=q,N(),L(e)})).catch((function(e){return console.log(e)}))}function N(){a.prevBtn.disabled=1===T,a.nextBtn.disabled=T===q,a.firstPage.hidden=T<4,a.lastPage.hidden=T>q-3,function(){for(var e=T+2,t=T-2;t<=e;t+=1)t>0&&t<=q&&a.pageList.insertAdjacentHTML("beforeend",'<li class="pages-item"><button type="button" class="pagination-btn">'.concat(t,"</button></li>"))}(),function(){for(var e=a.pageList.querySelectorAll("button"),t=0;t<e.length;t+=1)Number(e[t].textContent)===T&&e[t].classList.add("active-btn")}()}F.addEventListener("click",(function(t){if(t.preventDefault(),M.query=k.value.trim(),""===M.query.trim())return void e(i).Notify.failure("Please enter the text in search field");a.gallery.innerHTML="",a.pageList.innerHTML="",M.resetPage(),T=1,C()})),a.paginationList.addEventListener("click",(function(e){if(e.preventDefault(),"BUTTON"!==e.target.nodeName)return;a.gallery.innerHTML="",a.pageList.innerHTML="",T=Number(e.target.textContent),M.pagination(T),M.query?C():O()})),a.prevBtn.addEventListener("click",(function(e){e.preventDefault(),T>1&&(T-=1);a.gallery.innerHTML="",a.pageList.innerHTML="",M.pagination(T),M.query?C():O()})),a.nextBtn.addEventListener("click",(function(e){e.preventDefault(),T!==q&&(T+=1);a.gallery.innerHTML="",a.pageList.innerHTML="",M.pagination(T),M.query?C():O()})),M.pagination(T),O()}();
//# sourceMappingURL=index.a38b8b67.js.map
