const e={film:document.querySelector("#id"),modalOpen:document.querySelector("[data-film-open]"),modalClose:document.querySelector("[data-film-close]"),modal:document.querySelector("[data-film]"),modalFilmImg:document.querySelector(".modal__img"),modalFilmTitle:document.querySelector(".modal__title"),modalFilmVote:document.querySelector(".vote"),modalFilmVotes:document.querySelector(".votes"),modalFilmPopularity:document.querySelector(".popularity"),modalFilmOrigTitle:document.querySelector(".orig-title"),modalFilmGenre:document.querySelector(".genre"),modalFilmDescription:document.querySelector(".about__text")};init(),refs.searchForm.addEventListener("submit",onSearchForm),(()=>{function t(){document.body.classList.toggle("film-open"),e.modal.classList.toggle("is-hidden")}e.modalOpen.forEach((e=>{e.addEventListener("click",t)})),e.modalClose.addEventListener("click",t)})(),e.modalOpen.addEventListener("click",(function(t){(function(){const t=e.film.getAttribute(id);return fetch(`https://api.themoviedb.org//${t}?api_key=177f83f5259c7f846e561f4715bd03a4`).then((e=>{if(!e.ok)throw new Error;return e.json()})).catch((e=>Notify.failure("Sorry, something goes wrong. Please, try again")))})().then((t=>function(t){const o=t.genres.map((e=>e.name)).join(", ");e.modalFilmImg.src=`https://image.tmdb.org/t/p/w500/${t.poster_path}`,e.modalFilmImg.alt=`${t.title} poster`,e.modalFilmTitle.textContent=t.title,e.modalFilmVote.textContent=t.vote_average,e.modalFilmVotes.textContent=t.vote_count,e.modalFilmPopularity.textContent=t.popularity,e.modalFilmOrigTitle.textContent=t.original_title,e.modalFilmDescription.textContent=t.overview,e.modalFilmGenre.textContent=o}(t)))}));const t=document.querySelector(".card");function o(e){e.results.map((e=>{let o=new Date(e.release_date).getFullYear();genre_ids=e.genre_ids;let n=function(e){let t=[];return e.forEach((e=>{t.push(genreIdArr.find((t=>t.id===e)).name)})),t}(genre_ids);return t.innerHTML+=`<li class="card__item item">\n                  <a class="card__link link" href="#" data-modal-open>\n                  <div class="card__thumb">\n                  <img class="card__img"\n                    sizes="(min-width: 1280px) 370px, (min-width: 768px) 354px, (max-width: 767px) 450px, 100vw"\n                    src='https://www.themoviedb.org/t/p/w500/${e.poster_path}'\n                    alt="tehnocryak"\n                    width="100%"\n                  />\n                </div>\n                <div class="card__meta">\n                  <h2 class="card__title">${e.original_title}</h2>\n                  <p class="card__info">${n} | ${o}</p>\n                </div>\n              </a>\n            </li>`}))}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=177f83f5259c7f846e561f4715bd03a4&language=en-US").then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).then((e=>{genreIdArr=e.genres})).catch((e=>console.log(e))),fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=177f83f5259c7f846e561f4715bd03a4").then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).then((e=>o(e))).catch((e=>console.log(e))),window.onload=function(){document.body.classList.add("loaded_hiding"),window.setTimeout((function(){document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),500)};
//# sourceMappingURL=index.c1fdb5ab.js.map
