{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,4BAKAC,EAAAF,GAASG,OAAOC,KAAK,CACnBC,cAAc,IAGhB,IAAMC,EAAuB,QACvBC,EAAqB,QACvBC,EAAsB,GAGpBC,EAAO,CACXC,eAAgBC,SAASC,cAAc,iBACvCC,WAAYF,SAASC,cAAc,YACnCE,cAAeH,SAASC,cAAc,cACtCG,YAAaJ,SAASC,cAAc,eAgCtC,SAASI,IAIP,GAFAP,EAAKK,cAAcG,UAAUC,IAAI,cACjCT,EAAKM,YAAYE,UAAUE,OAAO,cAEc,MAA9CC,aAAaC,QAAQf,IAC4C,GAAjEgB,KAAKC,MAAMH,aAAaC,QAAQf,IAAuBkB,OAIvD,OAFAtB,EAAAF,GAASG,OAAOsB,QAAQ,wCACxBC,IAKFC,EAFAnB,EAAsBc,KAAKC,MAAMH,aAAaC,QAAQf,I,CAKxD,SAASsB,IAGP,GAFAnB,EAAKK,cAAcG,UAAUE,OAAO,cACpCV,EAAKM,YAAYE,UAAUC,IAAI,cAEe,MAA5CE,aAAaC,QAAQd,IAC0C,GAA/De,KAAKC,MAAMH,aAAaC,QAAQd,IAAqBiB,OAMrD,OAJAf,EAAKI,WAAWgB,UAAY,GAC5B3B,EAAAF,GAASG,OAAOsB,QAAQ,iCACxBC,SACAjB,EAAKK,cAAcgB,iBAAiB,QAASd,GAI/C,IAAIe,EADgBT,KAAKC,MAAMH,aAAaC,QAAQd,IAEpDyB,QAAQC,IAAIF,GAGoC,MAA9CX,aAAaC,QAAQf,IAC4C,GAAjEgB,KAAKC,MAAMH,aAAaC,QAAQf,IAAuBkB,SAEvDQ,QAAQC,IACN,4CACAb,aAAaC,QAAQf,IAEvBoB,IACAjB,EAAKK,cAAcgB,iBAAiB,QAASd,IAE/CW,EAAWI,E,CAGN,SAASJ,EAAWI,GACzB,IACMG,EAASH,EAAaI,KAC1B,SAAAC,G,IACEC,EAAcD,EAAdC,eACAC,EAAYF,EAAZE,aACSC,EADGH,EACZI,OAASC,KACTC,EAAEN,EAAFM,GACAC,EAAWP,EAAXO,YACAC,EAAYR,EAAZQ,aAGIC,EADO,IAAIC,KAAKR,GACGS,cACvB,MAAO,+EACmDC,OAAhBN,EAAG,eAIhCM,OAJ6CN,EAAG,8OAItCM,OAjBX,oCAwBkBA,OAPPL,EAAY,iMAQPK,OADEX,EAAe,2CACNW,OAAXT,EAAM,OAAuCS,OAAlCH,EAAY,wBAAmCG,OAAbJ,EAAa,qD,IAKxFK,KAAK,IACPxC,EAAKI,WAAWgB,UAAYK,C,CAGvB,SAASR,IACdjB,EAAKI,WAAWgB,UACd,wU,CAlHJG,QAAQC,IAAIxB,GAIZ,WACE,IAAKA,EAAKC,eAAeO,UAAUiC,SAAS,sBAC1C,OACK,GAC0C,OAA/C9B,aAAaC,QAAQf,IAC6C,IAAlEgB,KAAKC,MAAMH,aAAaC,QAAQf,IAAuBkB,OAEvDQ,QAAQC,IAAI,4BAAoDzB,GAChEN,EAAAF,GAASG,OAAOsB,QAAQ,mCACxBC,IAEAjB,EAAKM,YAAYe,iBAAiB,QAASF,OACtC,CAIL,IAAIG,EAHJvB,EAAsBc,KAAKC,MACzBH,aAAaC,QAAQf,IAGvBqB,EAAWI,GACXC,QAAQC,IAAIF,GACZtB,EAAKK,cAAcgB,iBAAiB,QAASd,GAC7CP,EAAKM,YAAYe,iBAAiB,QAASF,GAC3CnB,EAAKI,WAAWiB,iBAAiB,QAASqB,EAAAC,kB,EAvB9CC,E","sources":["src/js/library.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport './fetchMovieTrailer';\nimport { onModalWindowOpen, onModalWindowClose, onBackdropClick, onEscClose } from './modal_film';\n// import { markupCard } from '../watched-queue/watched-queue-markup';\n\nNotiflix.Notify.init({\n  clickToClose: true,\n});\n\nconst LOCAL_STORGE_WATCHED = 'watch';\nconst LOCAL_STORGE_QUEUE = 'queue';\nlet LocalStgWatchedData = [];\nlet LocalStgQueueData = [];\n\nconst refs = {\n  libraryCurrent: document.querySelector('#library-link'),\n  galleryRef: document.querySelector('.gallery'),\n  watchedButton: document.querySelector('.btn-watch'),\n  queueButton: document.querySelector('.btn-queue'),\n};\n\nconsole.log(refs);\n\ncurrentPageCheck();\n\nfunction currentPageCheck() {\n  if (!refs.libraryCurrent.classList.contains('nav__link--current')) {\n    return;\n  } else if (\n    localStorage.getItem(LOCAL_STORGE_WATCHED) === null ||\n    JSON.parse(localStorage.getItem(LOCAL_STORGE_WATCHED)).length === 0\n  ) {\n    console.log('Перевірка при завантажені', LocalStgWatchedData);\n    Notiflix.Notify.failure('There are no films in WATCHED !');\n    addImgIfLocalStgEmpty();\n\n    refs.queueButton.addEventListener('click', onQueueButton);\n  } else {\n    LocalStgWatchedData = JSON.parse(\n      localStorage.getItem(LOCAL_STORGE_WATCHED)\n    );\n    let LocalStgData = LocalStgWatchedData;\n    markupCard(LocalStgData);\n    console.log(LocalStgData);\n    refs.watchedButton.addEventListener('click', onWatchedButton);\n    refs.queueButton.addEventListener('click', onQueueButton);\n    refs.galleryRef.addEventListener('click', onModalWindowOpen);\n  }\n}\n\nfunction onWatchedButton() {\n  // refs.galleryRef.innerHTML = '';\n  refs.watchedButton.classList.add('btn-active');\n  refs.queueButton.classList.remove('btn-active');\n  if (\n    localStorage.getItem(LOCAL_STORGE_WATCHED) == null ||\n    JSON.parse(localStorage.getItem(LOCAL_STORGE_WATCHED)).length == 0\n  ) {\n    Notiflix.Notify.failure('There are no films in WATCHED !');\n    addImgIfLocalStgEmpty();\n    return;\n  }\n  LocalStgWatchedData = JSON.parse(localStorage.getItem(LOCAL_STORGE_WATCHED));\n  let LocalStgData = LocalStgWatchedData;\n  markupCard(LocalStgData);\n}\n\nfunction onQueueButton() {\n  refs.watchedButton.classList.remove('btn-active');\n  refs.queueButton.classList.add('btn-active');\n  if (\n    localStorage.getItem(LOCAL_STORGE_QUEUE) == null ||\n    JSON.parse(localStorage.getItem(LOCAL_STORGE_QUEUE)).length == 0\n  ) {\n    refs.galleryRef.innerHTML = '';\n    Notiflix.Notify.failure('There are no films in Queue !');\n    addImgIfLocalStgEmpty();\n    refs.watchedButton.addEventListener('click', onWatchedButton);\n    return;\n  }\n  LocalStgQueueData = JSON.parse(localStorage.getItem(LOCAL_STORGE_QUEUE));\n  let LocalStgData = LocalStgQueueData;\n  console.log(LocalStgData);\n\n  if (\n    localStorage.getItem(LOCAL_STORGE_WATCHED) == null ||\n    JSON.parse(localStorage.getItem(LOCAL_STORGE_WATCHED)).length == 0\n  ) {\n    console.log(\n      'onWatchedButton всередині функції onQUEUE',\n      localStorage.getItem(LOCAL_STORGE_WATCHED)\n    );\n    addImgIfLocalStgEmpty();\n    refs.watchedButton.addEventListener('click', onWatchedButton);\n  }\n  markupCard(LocalStgData);\n}\n\nexport function markupCard(LocalStgData) {\n  const filmImg = 'https://image.tmdb.org/t/p/w500/';\n  const markup = LocalStgData.map(\n    ({\n      original_title,\n      release_date,\n      genres: {name: genre},\n      id,\n      poster_path,\n      vote_average,\n    }) => {\n      let year = new Date(release_date);\n      let yearRelease = year.getFullYear();\n      return `<li class=\"card__item item\">\n      <a class=\"card__link link\" href=\"#\" id=\"${id}\" data-id=\"${id}\" data-film-open>\n        <div class=\"card__thumb\">\n          <img class=\"card__img\"                      \n            sizes=\"(min-width: 1200px) 370px, (min-width: 768px) 354px, (max-width: 767px) 450px, 100vw\"\n            src='${filmImg}${poster_path}'\n            alt=\"tehnocryak\"\n            width=\"100%\"\n            class=\"card__img\"\n          />\n        </div>\n        <div class=\"card__meta\">\n          <h2 class=\"card__title\">${original_title}</h2>\n          <p class=\"card__info\">${genre} | ${yearRelease} <span class=\"vote\">${vote_average}</span></p>\n        </div>\n      </a>\n    </li>`\n    }\n  ).join('');\n  refs.galleryRef.innerHTML = markup;\n}\n\nexport function addImgIfLocalStgEmpty() {\n  refs.galleryRef.innerHTML =\n    '<div class=\"img-emp\"><h2 style=\"font-size: 17px; text-align: center; margin-bottom: 20px;\">You have not chosen anything yet!</h2><img class=\"img-for-empty\" style=\" max-width: 704px; \" src=\"https://kartinkin.net/pics/uploads/posts/2022-08/1660180902_1-kartinkin-net-p-fon-kinoteatr-krasivo-1.jpg\" alt=\" \" loading=\"lazy\"/></div>';\n}\n"],"names":["$iU1Pc","parcelRequire","$parcel$interopDefault","Notify","init","clickToClose","$93effc6fc56091ad$var$LOCAL_STORGE_WATCHED","$93effc6fc56091ad$var$LOCAL_STORGE_QUEUE","$93effc6fc56091ad$var$LocalStgWatchedData","$93effc6fc56091ad$var$refs","libraryCurrent","document","querySelector","galleryRef","watchedButton","queueButton","$93effc6fc56091ad$var$onWatchedButton","classList","add","remove","localStorage","getItem","JSON","parse","length","failure","$93effc6fc56091ad$export$347f927d5e059c64","$93effc6fc56091ad$export$7c6f20cf2792bee5","$93effc6fc56091ad$var$onQueueButton","innerHTML","addEventListener","LocalStgData","console","log","markup","map","param","original_title","release_date","genre","genres","name","id","poster_path","vote_average","yearRelease","Date","getFullYear","concat","join","contains","$cgQ4j","onModalWindowOpen","$93effc6fc56091ad$var$currentPageCheck"],"version":3,"file":"library.eb15a8cd.js.map"}