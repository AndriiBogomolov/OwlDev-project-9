!function(){var e={film:document.querySelector("#id"),modalOpen:document.querySelector("[data-film-open]"),modalClose:document.querySelector("[data-film-close]"),modal:document.querySelector("[data-film]"),modalFilmImg:document.querySelector(".modal__img"),modalFilmTitle:document.querySelector(".modal__title"),modalFilmVote:document.querySelector(".vote"),modalFilmVotes:document.querySelector(".votes"),modalFilmPopularity:document.querySelector(".popularity"),modalFilmOrigTitle:document.querySelector(".orig-title"),modalFilmGenre:document.querySelector(".genre"),modalFilmDescription:document.querySelector(".about__text")},t={};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var n={};function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){t&&o(e.prototype,t);n&&o(e,n);return e};var i="177f83f5259c7f846e561f4715bd03a4",r="https://api.themoviedb.org/";init(),refs.searchForm.addEventListener("submit",onSearchForm),function(){function t(){document.body.classList.toggle("film-open"),e.modal.classList.toggle("is-hidden")}e.modalOpen.forEach((function(e){e.addEventListener("click",t)})),e.modalClose.addEventListener("click",t)}(),e.modalOpen.addEventListener("click",(function(t){(n=e.film.getAttribute(id),fetch("".concat(r,"/").concat(n,"?api_key=").concat(i)).then((function(e){if(!e.ok)throw new Error;return e.json()})).catch((function(e){return Notify.failure("Sorry, something goes wrong. Please, try again")}))).then((function(t){return o=(n=t).genres.map((function(e){return e.name})).join(", "),e.modalFilmImg.src="https://image.tmdb.org/t/p/w500/".concat(n.poster_path),e.modalFilmImg.alt="".concat(n.title," poster"),e.modalFilmTitle.textContent=n.title,e.modalFilmVote.textContent=n.vote_average,e.modalFilmVotes.textContent=n.vote_count,e.modalFilmPopularity.textContent=n.popularity,e.modalFilmOrigTitle.textContent=n.original_title,e.modalFilmDescription.textContent=n.overview,void(e.modalFilmGenre.textContent=o);var n,o}));var n}));var a=document.querySelector(".card");function l(e){e.results.map((function(e){var t=new Date(e.release_date).getFullYear();genre_ids=e.genre_ids;var n=function(e){var t=[];return e.forEach((function(e){t.push(genreIdArr.find((function(t){return t.id===e})).name)})),t}(genre_ids);return a.innerHTML+='<li class="card__item item">\n                  <a class="card__link link" href="#" data-modal-open>\n                  <div class="card__thumb">\n                  <img class="card__img"\n                    sizes="(min-width: 1280px) 370px, (min-width: 768px) 354px, (max-width: 767px) 450px, 100vw"\n                    src=\'https://www.themoviedb.org/t/p/w500/'.concat(e.poster_path,'\'\n                    alt="tehnocryak"\n                    width="100%"\n                  />\n                </div>\n                <div class="card__meta">\n                  <h2 class="card__title">').concat(e.original_title,'</h2>\n                  <p class="card__info">').concat(n," | ").concat(t,"</p>\n                </div>\n              </a>\n            </li>")}))}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=177f83f5259c7f846e561f4715bd03a4&language=en-US").then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){genreIdArr=e.genres})).catch((function(e){return console.log(e)})),fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=177f83f5259c7f846e561f4715bd03a4").then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){return l(e)})).catch((function(e){return console.log(e)})),window.onload=function(){document.body.classList.add("loaded_hiding"),window.setTimeout((function(){document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),500)}}();
//# sourceMappingURL=index.7630d8eb.js.map
